
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using the database package &#8212; SunPy v0.8.dev8694</title>
    
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8.dev8694',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="../../_static/version.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using SunPy’s HEK module" href="hek.html" />
    <link rel="prev" title="Finding and Downloading Data using Fido" href="fido.html" /><!-- Facebook OpenGraph -->
    <meta property="og:title" content="Using the database package | SunPy v0.8.dev8694" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/guide/acquiring_data/database.html" />
    <meta property="og:image" content="/_static/img/sunpy_icon.svg" />
    <meta property="og:description" content="" />
    <meta property="og:site_name" content="SunPy v0.8.dev8694" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  </head>
  <body role="document">


<div id="navbar" class="navbar navbar-default navbar-fixed-top">
  <div class="container">
	  <div class="navbar-header">
	    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	    </button>
	    <a class="navbar-brand" href="http://sunpy.org">SunPy</a>
	    <span class="navbar-text navbar-version pull-left"><b></b></span>
	  </div>
	  <div class="collapse navbar-collapse nav-collapse">
	    <ul class="nav navbar-nav">
		    
		    <div class="collapse navbar-collapse nav-collapse">
			    <ul class="nav navbar-nav navbar-left">
			    	<li class="dropdown">
			    	 <a role="button" id="dLabelGlobalToc" data-toggle="dropdown" data-target="#" href="#">About<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="dropdown-submenu">
                  <a href="https://duygukeskek.github.io/sunpy-website/about.html">About</a>
                </li>
                <li class="dropdown-submenu">
                  <a href="https://duygukeskek.github.io/sunpy-website/about.html#acknowledging-sunpy">Acknowledge</a>
            		</li>
            		<li class="dropdown-submenu">
                  <a href="https://github.com/sunpy/sunpy/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a>
            		</li>
              </ul>              
			      </li>
			      <li><a href="https://duygukeskek.github.io/sunpy-website/blog.html">Blog</a></li>
			      <li class="dropdown">
			    	 <a role="button" id="dLabelGlobalToc" data-toggle="dropdown" data-target="#" href="#">Documentation<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="dropdown-submenu">
                  <a href="http://sunpy.org/sunpy-sphinx-theme/index.html">SunPy</a>
                </li>
                <li class="dropdown-submenu">
                  <a href="http://docs.sunpy.org/projects/irispy/en/latest/">IRISPy</a>
            		</li>
            		<li class="dropdown-submenu">
                  <a href="http://docs.sunpy.org/projects/solarbextrapolation/en/latest/">SolarBExtrapolation</a>
            		</li>
            		<li class="dropdown-submenu">
                  <a href="http://docs.sunpy.org/projects/sunkit-sst/en/latest/index.html">sunkit-sst</a>
            		</li>
              </ul>              
			      </li>
			      <li><a href="../../index.html">Documentation</a></li>
       	        <div class="social-links">
        			<a href="https://twitter.com/share" class="twitter-share-button" data-via="sunpyproject">Tweet</a>
				    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        	        <iframe src="https://ghbtns.com/github-btn.html?user=sunpy&repo=sunpy&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
        	       </div>
	        	
	    	
	        </ul>
	    </div>	    
      </ul>
	  </div>
  </div>
</div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">

    <p class="doc-title">
        <a style="padding-left: 0" href="../../index.html">SunPy 0.8.dev8694</a>
    </p>
    <form class="navbar-form navbar-right" action="../../search.html" method="get">
        <div class="form-group">
            <input type="text" name="q" class="form-control" placeholder="Search" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
    <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">SunPy User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tour.html">A brief tour of SunPy</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Acquiring Data with SunPy</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sample-data.html">Downloading Sample Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="fido.html">Finding and Downloading Data using Fido</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the database package</a></li>
<li class="toctree-l3"><a class="reference internal" href="hek.html">Using SunPy&#8217;s HEK module</a></li>
<li class="toctree-l3"><a class="reference internal" href="helioviewer.html">Querying Helioviewer.org with SunPy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data_types/index.html">Data Types in SunPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html">Plotting in SunPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../units-coordinates.html">Units and Coordinates in SunPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../time.html">Time in SunPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roi.html">Region of Interest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../customization.html">Customizing SunPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../code_ref/index.html">Code Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/gallery/index.html">Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testingfeatures.html">Testing new features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bugs.html">Reporting Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ssw.html">SSWIDL/SunPy Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Full Changelog</a></li>
</ul>


        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="using-the-database-package">
<span id="database-guide"></span><h1>Using the database package<a class="headerlink" href="#using-the-database-package" title="Permalink to this headline">¶</a></h1>
<p>The database package offers the possibility to save retrieved data (e.g.
via the <code class="xref py py-mod docutils literal"><span class="pre">sunpy.net</span></code> package) onto a local or remote database. The
database may be a single file located on a local hard drive (if a SQLite
database is used) or a local or remote database server (see the SQLAlchemy
documentation for a <a class="reference external" href="http://docs.sqlalchemy.org/en/rel_0_8/dialects/">list of supported databases</a>)
This makes it possible to fetch required data from the local database
instead of downloading it again from a remote server. The package
<a class="reference internal" href="../../code_ref/database.html#module-sunpy.database" title="sunpy.database"><code class="xref py py-mod docutils literal"><span class="pre">sunpy.database</span></code></a> was developed as part of <a class="reference external" href="http://www.google-melange.com/gsoc/homepage/google/gsoc2013">Google Summer of Code
(GSOC) 2013</a>.</p>
<div class="section" id="connecting-and-initializing-the-database">
<h2>1. Connecting and initializing the database<a class="headerlink" href="#connecting-and-initializing-the-database" title="Permalink to this headline">¶</a></h2>
<p>To start a connection to an existing or a new database, instantiate
a <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database" title="sunpy.database.Database"><code class="xref py py-class docutils literal"><span class="pre">Database</span></code></a> object.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sunpy.database</span> <span class="k">import</span> <span class="n">Database</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s1">&#39;sqlite:///sunpydata.sqlite&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The database object in our example above connects to a new SQLite database with
the file name &#8220;sunpydata.sqlite&#8221; in the current directory.</p>
<p>The first parameter of <code class="docutils literal"><span class="pre">Database</span></code> receives one mandatory argument:
a URL which describes how to connect to the database. This value is
directly passed to <code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.create_engine()</span></code>. The supported
format of this URL is described by the documentation of
<code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.create_engine()</span></code> as follows:</p>
<blockquote>
<div>&#8220;The string form of the URL is
<code class="docutils literal"><span class="pre">dialect+driver://user:password&#64;host/dbname[?key=value..]</span></code>, where
dialect is a database name such as <code class="docutils literal"><span class="pre">mysql</span></code>, <code class="docutils literal"><span class="pre">oracle</span></code>, <code class="docutils literal"><span class="pre">postgresql</span></code>,
etc., and driver the name of a DBAPI, such as <code class="docutils literal"><span class="pre">psycopg2</span></code>,
<code class="docutils literal"><span class="pre">pyodbc</span></code>, <code class="docutils literal"><span class="pre">cx_oracle</span></code>, etc.&#8221;</div></blockquote>
<p>Note that a connection is only established when it&#8217;s really needed, i.e. if some query
is sent to the database to read from it. Transactions can also be committed explicitly
using the <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.commit" title="sunpy.database.Database.commit"><code class="xref py py-meth docutils literal"><span class="pre">Database.commit()</span></code></a> method.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you are using <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database" title="sunpy.database.Database"><code class="xref py py-class docutils literal"><span class="pre">Database</span></code></a> objects in an interactive Python
session you must not forget to call the <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.commit" title="sunpy.database.Database.commit"><code class="xref py py-meth docutils literal"><span class="pre">Database.commit()</span></code></a> method
on them explicitly before quitting the Python session! Otherwise, all
changes on the altered databases are lost!</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can set the default database url in the sunpy config file under the
&#8216;database&#8217; section. See <a class="reference internal" href="../customization.html#customizing-sunpy"><span class="std std-ref">Customizing SunPy</span></a> for information on the
config file. A database section might look like this:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">database</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">sqlite</span><span class="p">:</span><span class="o">////</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">sunpy</span><span class="o">/</span><span class="n">my_database</span><span class="o">.</span><span class="n">sqlite</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="adding-new-entries">
<h2>2. Adding new entries<a class="headerlink" href="#adding-new-entries" title="Permalink to this headline">¶</a></h2>
<p>Before explaining how to add new entries, it is important to know what
information is saved in an entry. Each database entry is an instance of
the class <a class="reference internal" href="../../api/sunpy.database.tables.DatabaseEntry.html#sunpy.database.tables.DatabaseEntry" title="sunpy.database.tables.DatabaseEntry"><code class="xref py py-class docutils literal"><span class="pre">tables.DatabaseEntry</span></code></a> with the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>id</td>
<td>A unique ID number. By default it is None, but
automatically set to the maximum number plus one
when an entry is added to the database.</td>
</tr>
<tr class="row-odd"><td>source</td>
<td>The source is the name of an observatory or the
name of a network of observatories.</td>
</tr>
<tr class="row-even"><td>provider</td>
<td>The name of the server which provides the retrieved
data.</td>
</tr>
<tr class="row-odd"><td>physobs</td>
<td>A physical observable identifier used by VSO.</td>
</tr>
<tr class="row-even"><td>fileid</td>
<td>The file ID is a string defined by the data
provider that should point to a specific data
product. The association of fileid to the specific
data may change sometime, if the fileid always
points to the latest calibrated data.</td>
</tr>
<tr class="row-odd"><td>observation_time_start</td>
<td>The date and time when the observation of the data
started.</td>
</tr>
<tr class="row-even"><td>observation_time_end</td>
<td>The date and time when the observation of the data
ended.</td>
</tr>
<tr class="row-odd"><td>instrument</td>
<td>The instrument which was used to observe the data.</td>
</tr>
<tr class="row-even"><td>size</td>
<td>The size of the data in kilobytes (-1 if unknown).</td>
</tr>
<tr class="row-odd"><td>wavemin</td>
<td>The value of the measured wave length.</td>
</tr>
<tr class="row-even"><td>wavemax</td>
<td>This is the same value as <code class="docutils literal"><span class="pre">wavemin</span></code>. The value is
stored twice, because each
<code class="docutils literal"><span class="pre">suds.sudsobject.QueryResponseBlock</span></code> which is
used by the vso package contains both these values.</td>
</tr>
<tr class="row-odd"><td>path</td>
<td>A local file path where the according FITS file is
saved.</td>
</tr>
<tr class="row-even"><td>download_time</td>
<td>The date and time when the files connected to a
query have been downloaded. Note: this is not the
date and time when this entry has been added to a
database!</td>
</tr>
<tr class="row-odd"><td>starred</td>
<td>Entries can be starred to mark them. By default,
this value is False.</td>
</tr>
<tr class="row-even"><td>fits_header_entries</td>
<td>A list of <a class="reference internal" href="../../api/sunpy.database.tables.FitsHeaderEntry.html#sunpy.database.tables.FitsHeaderEntry" title="sunpy.database.tables.FitsHeaderEntry"><code class="xref py py-class docutils literal"><span class="pre">tables.FitsHeaderEntry</span></code></a> instances.</td>
</tr>
<tr class="row-odd"><td>fits_key_comments</td>
<td>A list of <a class="reference internal" href="../../api/sunpy.database.tables.FitsKeyComment.html#sunpy.database.tables.FitsKeyComment" title="sunpy.database.tables.FitsKeyComment"><code class="xref py py-class docutils literal"><span class="pre">tables.FitsKeyComment</span></code></a> instances.</td>
</tr>
<tr class="row-even"><td>tags</td>
<td>A list of <a class="reference internal" href="../../api/sunpy.database.tables.Tag.html#sunpy.database.tables.Tag" title="sunpy.database.tables.Tag"><code class="xref py py-class docutils literal"><span class="pre">tables.Tag</span></code></a> instances.</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">id</span></code> attribute is automatically set if an entry is added to a database.</li>
<li>The attributes <code class="docutils literal"><span class="pre">source</span></code>, <code class="docutils literal"><span class="pre">provider</span></code>, <code class="docutils literal"><span class="pre">physobs</span></code>, <code class="docutils literal"><span class="pre">fileid</span></code>,
<code class="docutils literal"><span class="pre">observation_time_start</span></code>, <code class="docutils literal"><span class="pre">observation_time_end</span></code>, <code class="docutils literal"><span class="pre">instrument</span></code>,  <code class="docutils literal"><span class="pre">size</span></code>,
<code class="docutils literal"><span class="pre">wavemin</span></code>, and <code class="docutils literal"><span class="pre">wavemax</span></code> are set by methods which use the VSO interface. In
particular, these are <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.add_from_vso_query_result" title="sunpy.database.Database.add_from_vso_query_result"><code class="xref py py-meth docutils literal"><span class="pre">Database.add_from_vso_query_result()</span></code></a>,
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.download" title="sunpy.database.Database.download"><code class="xref py py-meth docutils literal"><span class="pre">Database.download()</span></code></a> and   possibly <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.fetch" title="sunpy.database.Database.fetch"><code class="xref py py-meth docutils literal"><span class="pre">Database.fetch()</span></code></a>.</li>
<li>The attributes <code class="docutils literal"><span class="pre">path</span></code> and <code class="docutils literal"><span class="pre">download_time</span></code> are set by the method
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.download" title="sunpy.database.Database.download"><code class="xref py py-meth docutils literal"><span class="pre">Database.download()</span></code></a> and also possibly by <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.fetch" title="sunpy.database.Database.fetch"><code class="xref py py-meth docutils literal"><span class="pre">Database.fetch()</span></code></a>. <code class="docutils literal"><span class="pre">starred</span></code>
is set or changed via the method   <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.star" title="sunpy.database.Database.star"><code class="xref py py-meth docutils literal"><span class="pre">Database.star()</span></code></a> or <code class="xref py py-meth docutils literal"><span class="pre">unstar()</span></code>,
respectively. Analogously, <code class="docutils literal"><span class="pre">tags</span></code> is set via the methods <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.tag" title="sunpy.database.Database.tag"><code class="xref py py-meth docutils literal"><span class="pre">Database.tag()</span></code></a>
and <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.remove_tag" title="sunpy.database.Database.remove_tag"><code class="xref py py-meth docutils literal"><span class="pre">Database.remove_tag()</span></code></a>.</li>
<li>The attribute <code class="docutils literal"><span class="pre">fits_header_entries</span></code> is set by the methods
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.download" title="sunpy.database.Database.download"><code class="xref py py-meth docutils literal"><span class="pre">Database.download()</span></code></a>, <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.add_from_dir" title="sunpy.database.Database.add_from_dir"><code class="xref py py-meth docutils literal"><span class="pre">Database.add_from_dir()</span></code></a>, and
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.add_from_file" title="sunpy.database.Database.add_from_file"><code class="xref py py-meth docutils literal"><span class="pre">Database.add_from_file()</span></code></a>.</li>
</ul>
<div class="section" id="adding-entries-from-one-fits-file">
<h3>2.1 Adding entries from one FITS file<a class="headerlink" href="#adding-entries-from-one-fits-file" title="Permalink to this headline">¶</a></h3>
<p>The method <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.add_from_file" title="sunpy.database.Database.add_from_file"><code class="xref py py-meth docutils literal"><span class="pre">Database.add_from_file()</span></code></a> receives one positional argument
(either a string or a file-like object) which is used to add at least one
new entry from the given FITS file to the database. Why &#8220;at least one&#8221; and
not &#8220;exactly one&#8221;? The reason is that each database entry does not
represent one file but one FITS header of a file. That means, if you pass
a file which has 5 FITS headers in it, 5 entries will be added to the
database. The file in the following example (<code class="docutils literal"><span class="pre">sunpy.data.sample.AIA_171_IMAGE</span></code>) has
only one FITS header, that is why just one entry is added to the database.
However, if you are working with Hinode/SOT files you may notice that for
each file you get two entries, one which refers to the observation and
another that contains some (useless - as <a class="reference external" href="http://listmgr.cv.nrao.edu/pipermail/fitsbits/2007-August/001923.html">discussed</a>
in the <a class="reference external" href="http://listmgr.cv.nrao.edu/mailman/listinfo/fitsbits">fitsbits mailing list</a>)
telemetry data.</p>
<p>The method saves the value of <code class="xref py py-obj docutils literal"><span class="pre">path</span></code> by either simply passing on the value
of the received argument (if it was a string) or by reading the value of
<code class="docutils literal"><span class="pre">file.name</span></code> where <code class="docutils literal"><span class="pre">file</span></code> is the passed argument. If the path cannot be
determined, it stays to <code class="docutils literal"><span class="pre">None</span></code> (the default value).</p>
<p>The values of <code class="xref py py-obj docutils literal"><span class="pre">wavemin</span></code> and <code class="xref py py-obj docutils literal"><span class="pre">wavemax</span></code> are only set if the wavelength unit
of the passed FITS file can be found out or if the attribute
<code class="xref py py-obj docutils literal"><span class="pre">default_waveunit</span></code> of the database object is set. These values are then
used to convert from the used unit to nanometers. The rationale behind
this behaviour is that it makes querying for wavelengths more flexible.
tl;dr: <strong>wavelengths are always stored in nanometers!</strong></p>
<p>The value of the attribute <code class="xref py py-obj docutils literal"><span class="pre">instrument</span></code> is simply set by looking up the
FITS header key <em>INSTRUME</em>. The value of <code class="xref py py-obj docutils literal"><span class="pre">observation_time_start</span></code> is set
by searching for the FITS header key <em>DATE-OBS</em> or <em>DATE_OBS</em>.
Analogously, <code class="xref py py-obj docutils literal"><span class="pre">observation_time_end</span></code> is set by searching for <em>DATE-END</em> or
<em>DATE_END</em>. Finally, the whole FITS header is stored in the attribute
<code class="xref py py-obj docutils literal"><span class="pre">fits_header_entries</span></code> as a list of <a class="reference internal" href="../../api/sunpy.database.tables.FitsHeaderEntry.html#sunpy.database.tables.FitsHeaderEntry" title="sunpy.database.tables.FitsHeaderEntry"><code class="xref py py-class docutils literal"><span class="pre">tables.FitsHeaderEntry</span></code></a>
instances. All FITS comments are stored in the attribute
<code class="xref py py-obj docutils literal"><span class="pre">fits_key_comments</span></code> which is a list of <a class="reference internal" href="../../api/sunpy.database.tables.FitsKeyComment.html#sunpy.database.tables.FitsKeyComment" title="sunpy.database.tables.FitsKeyComment"><code class="xref py py-class docutils literal"><span class="pre">tables.FitsKeyComment</span></code></a>
instances.</p>
<p>Using the function <code class="docutils literal"><span class="pre">len</span></code> on a <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database" title="sunpy.database.Database"><code class="xref py py-class docutils literal"><span class="pre">Database</span></code></a> object returns the
number of saved database entries. To get the first entry of the database,
<code class="docutils literal"><span class="pre">database[0]</span></code> is used (the ID number of the entries does not matter,
<code class="docutils literal"><span class="pre">database[0]</span></code> always returns the oldest saved entry of the database). If
the database had been empty, this expression would have raised an
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#IndexError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">IndexError</span></code></a>. In section 3, more advanced formats of the slicing
syntax are introduced.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sunpy.data.sample</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_from_file</span><span class="p">(</span><span class="n">sunpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">AIA_171_IMAGE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span> <span class="o">=</span> <span class="n">database</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="n">sunpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">AIA_171_IMAGE</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span><span class="o">.</span><span class="n">wavemin</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">wavemax</span>
<span class="go">(17.1, 17.1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span><span class="o">.</span><span class="n">instrument</span>
<span class="go">&#39;AIA_3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span><span class="o">.</span><span class="n">observation_time_start</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">observation_time_end</span>
<span class="go">(datetime.datetime(2011, 3, 19, 10, 54, 0, 340000), None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">fits_header_entries</span><span class="p">)</span>
<span class="go">170</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fits_header_entry</span> <span class="ow">in</span> <span class="n">entry</span><span class="o">.</span><span class="n">fits_header_entries</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{entry.key}</span><span class="se">\n\t</span><span class="si">{entry.value}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entry</span><span class="o">=</span><span class="n">fits_header_entry</span><span class="p">))</span>   
<span class="go">SIMPLE</span>
<span class="go">    True</span>
<span class="go">BITPIX</span>
<span class="go">    32</span>
<span class="go">NAXIS</span>
<span class="go">    2</span>
<span class="go">NAXIS1</span>
<span class="go">    1024</span>
<span class="go">NAXIS2</span>
<span class="go">    1024</span>
<span class="go">EXTEND</span>
<span class="go">    True</span>
<span class="go">COMMENT</span>
<span class="go">    FITS (Flexible Image Transport System) format is defined in &#39;Astronomy  and Astrophysics&#39;, volume 376, page 359; bibcode: 2001A&amp;A...376..359H</span>
<span class="go">ORIGIN</span>
<span class="go">    SDO/JSOC-SDP</span>
<span class="go">DATE</span>
<span class="go">    2011-03-19T11:08:25</span>
<span class="go">TELESCOP</span>
<span class="go">    SDO/AIA</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fits_key_comment</span> <span class="ow">in</span> <span class="n">entry</span><span class="o">.</span><span class="n">fits_key_comments</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{comment.key}</span><span class="se">\n\t</span><span class="si">{comment.value}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">comment</span><span class="o">=</span><span class="n">fits_key_comment</span><span class="p">))</span>   
<span class="go">NAXIS</span>
<span class="go">        number of data axes</span>
<span class="go">NAXIS1</span>
<span class="go">        length of data axis 1</span>
<span class="go">DATASUM</span>
<span class="go">        data unit checksum updated 2011-03-19T11:08:18</span>
<span class="go">EXTEND</span>
<span class="go">        FITS dataset may contain extensions</span>
<span class="go">BITPIX</span>
<span class="go">        number of bits per data pixel</span>
<span class="go">SIMPLE</span>
<span class="go">        file does conform to FITS standard</span>
<span class="go">CHECKSUM</span>
<span class="go">        HDU checksum updated 2011-03-19T11:08:18</span>
<span class="go">NAXIS2</span>
<span class="go">        length of data axis 2</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-entries-from-a-directory-of-fits-files">
<h3>2.2 Adding entries from a directory of FITS files<a class="headerlink" href="#adding-entries-from-a-directory-of-fits-files" title="Permalink to this headline">¶</a></h3>
<p>Adding all FITS files from a certain directory works by calling the method
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.add_from_dir" title="sunpy.database.Database.add_from_dir"><code class="xref py py-meth docutils literal"><span class="pre">Database.add_from_dir()</span></code></a> and passing the desired directory to it. By
setting the keyword argument <code class="xref py py-obj docutils literal"><span class="pre">ignore_already_added</span></code> to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">True</span></code></a>, no
exception is raised if it is attempted to add an already existing entry
(In this case, setting this parameter is required because the file
<code class="docutils literal"><span class="pre">sunpy.data.sample.AIA_171_IMAGE</span></code> was already added which is located in the
directory <code class="docutils literal"><span class="pre">sampledata_dir</span></code>).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sunpy</span> <span class="k">import</span> <span class="n">config</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sampledata_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;downloads&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_dir&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">default_waveunit</span> <span class="o">=</span> <span class="s1">&#39;angstrom&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_from_dir</span><span class="p">(</span><span class="n">sampledata_dir</span><span class="p">,</span> <span class="n">ignore_already_added</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">25</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-entries-using-the-vso-interface">
<h3>2.3 Adding entries using the VSO interface<a class="headerlink" href="#adding-entries-using-the-vso-interface" title="Permalink to this headline">¶</a></h3>
<div class="section" id="adding-entries-from-a-vso-query-result">
<h4>2.3.1 Adding entries from a VSO query result<a class="headerlink" href="#adding-entries-from-a-vso-query-result" title="Permalink to this headline">¶</a></h4>
<p>A VSO query result can be used to add new entries to the database. The
number of database entries that will be added is equal to the value of
<code class="docutils literal"><span class="pre">len(qr)</span></code> in the following code snippet. Note that the method
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.add_from_vso_query_result" title="sunpy.database.Database.add_from_vso_query_result"><code class="xref py py-meth docutils literal"><span class="pre">Database.add_from_vso_query_result()</span></code></a> does not download any files,
though. If you want to add new entries using the VSO and also want to
download files at the same time, take a look at the following two
sections.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sunpy.net</span> <span class="k">import</span> <span class="n">vso</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">vso</span><span class="o">.</span><span class="n">VSOClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="s1">&#39;2011-05-08&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-05-08 00:00:05&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s1">&#39;AIA&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add_from_vso_query_result</span><span class="p">(</span><span class="n">qr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">29</span>
</pre></div>
</div>
</div>
<div class="section" id="clever-fetching">
<h4>2.3.2 &#8220;Clever&#8221; Fetching<a class="headerlink" href="#clever-fetching" title="Permalink to this headline">¶</a></h4>
<p>The method <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.fetch" title="sunpy.database.Database.fetch"><code class="xref py py-meth docutils literal"><span class="pre">Database.fetch()</span></code></a> queries the database if the given query has
already been used once to add entries. Otherwise, the given query is used to
download and add new data. The <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.fetch" title="sunpy.database.Database.fetch"><code class="xref py py-meth docutils literal"><span class="pre">Database.fetch()</span></code></a>  method also accepts an
optional keyword argument <code class="xref py py-obj docutils literal"><span class="pre">path</span></code> which is passed as-is to
<a class="reference internal" href="../../api/sunpy.net.vso.VSOClient.html#sunpy.net.vso.VSOClient.get" title="sunpy.net.vso.VSOClient.get"><code class="xref py py-meth docutils literal"><span class="pre">sunpy.net.vso.VSOClient.get()</span></code></a> and determines the value of the <code class="xref py py-obj docutils literal"><span class="pre">path</span></code>
attribute of each entry.</p>
<p>Note that not the number of records of the resulting query result determines the
number of entries that will be added to the database! The number of entries that
will be added depends on the total number of FITS headers.</p>
<p>In the next code snippet you can see that new data is downloaded as this query
has not been downloaded before.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">entries</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="s1">&#39;2012-08-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-08-05 00:00:05&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s1">&#39;AIA&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">33</span>
</pre></div>
</div>
<p>Now you can see that the next fetch call does not
add any new entries to the database, because they have been downloaded
earlier. The query is exactly similar to the previous one.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">entries</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="s1">&#39;2012-08-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-08-05 00:00:05&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s1">&#39;AIA&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">33</span>
</pre></div>
</div>
<p>Another fetch call downloads new files because this is a new date range
whose files have not been downloaded yet.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">entries</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="s1">&#39;2013-08-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-08-05 00:00:05&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s1">&#39;AIA&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">37</span>
</pre></div>
</div>
<p>The caching also ensures that in case of queries which have some results in
common, files for the common results will not be downloaded again. In the
following example, you can see that even if the query is a new one, it
will have all files in common with the previous query. Therefore, no new
files are downloaded.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">entries</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="s1">&#39;2012-08-05 00:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-08-05 00:00:01&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s1">&#39;AIA&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">37</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="adding-entries-manually">
<h3>2.4 Adding entries manually<a class="headerlink" href="#adding-entries-manually" title="Permalink to this headline">¶</a></h3>
<p>Although usually not required, it is also possible to add database entries
by specifying the parameters manually. To do so, you simply pass the
values as keyword arguments to <a class="reference internal" href="../../api/sunpy.database.tables.DatabaseEntry.html#sunpy.database.tables.DatabaseEntry" title="sunpy.database.tables.DatabaseEntry"><code class="xref py py-class docutils literal"><span class="pre">tables.DatabaseEntry</span></code></a> as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sunpy.database.tables</span> <span class="k">import</span> <span class="n">DatabaseEntry</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span> <span class="o">=</span> <span class="n">DatabaseEntry</span><span class="p">(</span><span class="n">instrument</span><span class="o">=</span><span class="s1">&#39;EIT&#39;</span><span class="p">,</span> <span class="n">wavemin</span><span class="o">=</span><span class="mf">25.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span> <span class="ow">in</span> <span class="n">database</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">entry</span> <span class="ow">in</span> <span class="n">database</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">38</span>
</pre></div>
</div>
<p>Note that the <code class="xref py py-obj docutils literal"><span class="pre">in</span></code> operator works only as expected after the
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.commit" title="sunpy.database.Database.commit"><code class="xref py py-meth docutils literal"><span class="pre">Database.commit()</span></code></a> method has been called!</p>
</div>
</div>
<div class="section" id="displaying-entries-in-a-table">
<h2>3. Displaying entries in a table<a class="headerlink" href="#displaying-entries-in-a-table" title="Permalink to this headline">¶</a></h2>
<p>Meanwhile, 37 entries have been added, all of them saving a lot of data.
How can selected data of each entry be displayed? Fortunately, there is a
helper function to do this: <a class="reference internal" href="../../api/sunpy.database.tables.display_entries.html#sunpy.database.tables.display_entries" title="sunpy.database.tables.display_entries"><code class="xref py py-func docutils literal"><span class="pre">tables.display_entries()</span></code></a> takes two
arguments: the first one is an iterator of <a class="reference internal" href="../../api/sunpy.database.tables.DatabaseEntry.html#sunpy.database.tables.DatabaseEntry" title="sunpy.database.tables.DatabaseEntry"><code class="xref py py-class docutils literal"><span class="pre">tables.DatabaseEntry</span></code></a>
instances. Remember that an instance of <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database" title="sunpy.database.Database"><code class="xref py py-class docutils literal"><span class="pre">Database</span></code></a> yields instances
of <a class="reference internal" href="../../api/sunpy.database.tables.DatabaseEntry.html#sunpy.database.tables.DatabaseEntry" title="sunpy.database.tables.DatabaseEntry"><code class="xref py py-class docutils literal"><span class="pre">tables.DatabaseEntry</span></code></a> instances, so you can simply pass a
database object. The second argument is an iterable of the resulting
columns in the table to be displayed. Each string in this iterable is used
to access the entry&#8217;s attribute values. In the following example, the
values of <code class="docutils literal"><span class="pre">entry.id</span></code>, <code class="docutils literal"><span class="pre">entry.observation_time_start</span></code>,
<code class="docutils literal"><span class="pre">entry.observation_time_end</span></code>, <code class="docutils literal"><span class="pre">entry.instrument</span></code>, <code class="docutils literal"><span class="pre">entry.wavemin</span></code>,
and <code class="docutils literal"><span class="pre">entry.wavemax</span></code> are displayed (where <code class="docutils literal"><span class="pre">entry</span></code> stands for the
respective database entry). Note that <em>N/A</em> is displayed if the value
cannot be found or is not set.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sunpy.database.tables</span> <span class="k">import</span> <span class="n">display_entries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span><span class="n">database</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">1  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1</span>
<span class="go">2  N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">3  2013-09-21 16:00:06    N/A                  AIA_2      19.3    19.3</span>
<span class="go">4  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1</span>
<span class="go">5  2014-04-09 06:00:12    N/A                  AIA_3      17.1    17.1</span>
<span class="go">6  2011-09-22 00:00:00    2011-09-22 00:00:00  BIR        N/A     N/A</span>
<span class="go">7  N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">8  2002-06-25 10:00:10    N/A                  EIT        19.5    19.5</span>
<span class="go">9  2002-02-20 11:06:00    2002-02-20 11:06:43  RHESSI     N/A     N/A</span>
<span class="go">10 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">11 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">12 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">13 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">14 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">15 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">16 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">17 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">18 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">19 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">20 2010-10-16 19:12:18    2010-10-16 19:12:22  RHESSI     N/A     N/A</span>
<span class="go">21 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">22 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">23 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">24 2012-10-30 15:30:01    N/A                  AIA_4      9.4     9.4</span>
<span class="go">25 2012-01-01 00:16:07    N/A                  SWAP       17.4    17.4</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">31 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">34 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">35 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">38 N/A                    N/A                  EIT        25.0    N/A</span>
</pre></div>
</div>
<p>In Section 2.1, &#8220;Adding entries from one FITS file&#8221;, it has already been
shows that the index operator can be used to access certain single
database entries like <code class="docutils literal"><span class="pre">database[5]</span></code> or even use negative indices such as
in <code class="docutils literal"><span class="pre">database[-2]</span></code> to get the second-latest entry. It is also possible to
use the more advanced slicing syntax: <code class="docutils literal"><span class="pre">database[:]</span></code> returns a list of
all database entries (and is hereby an alias for <code class="docutils literal"><span class="pre">list(database)</span></code>),
<code class="docutils literal"><span class="pre">database[::2]</span></code> returns a list of every 2nd entry, starting with the
oldest one. As you can imagine, <code class="docutils literal"><span class="pre">database[9::10]</span></code> starts with the 10th
entry and returns a list of every 10th entry from there.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span><span class="n">database</span><span class="p">[</span><span class="mi">9</span><span class="p">::</span><span class="mi">10</span><span class="p">],</span>
<span class="gp">... </span>                      <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">10 N/A                    N/A                  N/A        N/A     N/A</span>
<span class="go">20 2010-10-16 19:12:18    2010-10-16 19:12:22  RHESSI     N/A     N/A</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-entries">
<h2>4. Removing entries<a class="headerlink" href="#removing-entries" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">database.remove()</span></code> can be used to remove database entries from the SunPy
database. It takes a <code class="docutils literal"><span class="pre">tables.DatabaseEntry</span></code> object as argument.</p>
<p>For example, let us imagine we want to only have database entries which have some
observation time saved. To remove all entries where the value of both
<code class="docutils literal"><span class="pre">observation_time_start</span></code> and <code class="docutils literal"><span class="pre">observation_time_end</span></code> is None, one can
simply iterate over the database and uses the <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.remove" title="sunpy.database.Database.remove"><code class="xref py py-meth docutils literal"><span class="pre">Database.remove()</span></code></a>
method to remove those where the just described predicate is true:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">database_entry</span> <span class="ow">in</span> <span class="n">database</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">database_entry</span><span class="o">.</span><span class="n">observation_time_start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">database_entry</span><span class="o">.</span><span class="n">observation_time_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">database</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">database_entry</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="go">22</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span><span class="n">database</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">1  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1</span>
<span class="go">3  2013-09-21 16:00:06    N/A                  AIA_2      19.3    19.3</span>
<span class="go">4  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1</span>
<span class="go">5  2014-04-09 06:00:12    N/A                  AIA_3      17.1    17.1</span>
<span class="go">6  2011-09-22 00:00:00    2011-09-22 00:00:00  BIR        N/A     N/A</span>
<span class="go">8  2002-06-25 10:00:10    N/A                  EIT        19.5    19.5</span>
<span class="go">9  2002-02-20 11:06:00    2002-02-20 11:06:43  RHESSI     N/A     N/A</span>
<span class="go">20 2010-10-16 19:12:18    2010-10-16 19:12:22  RHESSI     N/A     N/A</span>
<span class="go">24 2012-10-30 15:30:01    N/A                  AIA_4      9.4     9.4</span>
<span class="go">25 2012-01-01 00:16:07    N/A                  SWAP       17.4    17.4</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">31 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">34 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">35 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
</pre></div>
</div>
<p>There are more possible ways to remove entries: You can remove every 2nd
entry by iterating over <code class="docutils literal"><span class="pre">database[::2]</span></code> and then calling passing every
yielded entry to <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.remove" title="sunpy.database.Database.remove"><code class="xref py py-meth docutils literal"><span class="pre">Database.remove()</span></code></a>. You can even do advanced
operations easily like for example removing every entry with a certain
observation start time, instrument, and FITS header entry pair. This
requires knowledge of the <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.query" title="sunpy.database.Database.query"><code class="xref py py-meth docutils literal"><span class="pre">Database.query()</span></code></a> method though, which will
be covered in section 7, &#8220;Querying the database&#8221;.</p>
</div>
<div class="section" id="editing-entries">
<h2>5. Editing entries<a class="headerlink" href="#editing-entries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="starring-and-unstarring-entries">
<h3>5.1 Starring and unstarring entries<a class="headerlink" href="#starring-and-unstarring-entries" title="Permalink to this headline">¶</a></h3>
<p>The database package supports marking certain entries as &#8220;starred&#8221;. This
concept may be familiar to you from graphical applications such as E-Mail
clients or photo managers. The method <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.star" title="sunpy.database.Database.star"><code class="xref py py-meth docutils literal"><span class="pre">Database.star()</span></code></a> marks the
passed entry as starred. Let&#8217;s say we are for some reason interested in
all values that have a wavelength of 20nm or higher, so we mark those as
starred:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">database_entry</span> <span class="ow">in</span> <span class="n">database</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">database_entry</span><span class="o">.</span><span class="n">wavemin</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">database</span><span class="o">.</span><span class="n">star</span><span class="p">(</span><span class="n">database_entry</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">entry</span><span class="p">:</span> <span class="n">entry</span><span class="o">.</span><span class="n">starred</span><span class="p">,</span> <span class="n">database</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
</pre></div>
</div>
<p>So remove the mark from these entries, the method <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.unstar" title="sunpy.database.Database.unstar"><code class="xref py py-meth docutils literal"><span class="pre">Database.unstar()</span></code></a>
works the same way.</p>
</div>
<div class="section" id="setting-and-removing-tags">
<h3>5.2 Setting and removing tags<a class="headerlink" href="#setting-and-removing-tags" title="Permalink to this headline">¶</a></h3>
<p>The starring concept is somewhat &#8220;binary&#8221; in a way that one can only
decide whether to mark an entry as starred or not. To add some more
information by assigning keywords to entries, the database package also
supports <em>tags</em>. The <code class="xref py py-obj docutils literal"><span class="pre">tags</span></code> property of a database object holds all tags
that are saved in this database. Let us assign the tag <em>spring</em> to all
entries that have been observed in March, April, or May on any day at any
year:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">database_entry</span> <span class="ow">in</span> <span class="n">database</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">database_entry</span><span class="o">.</span><span class="n">observation_time_start</span><span class="o">.</span><span class="n">month</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]:</span>
<span class="gp">... </span>        <span class="n">database</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">database_entry</span><span class="p">,</span> <span class="s1">&#39;spring&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">tags</span>
<span class="go">[&lt;Tag(name &#39;spring&#39;)&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spring</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">entry</span><span class="p">:</span> <span class="n">spring</span> <span class="ow">in</span> <span class="n">entry</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span> <span class="n">database</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">1  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1</span>
<span class="go">4  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1</span>
<span class="go">5  2014-04-09 06:00:12    N/A                  AIA_3      17.1    17.1</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-custom-attributes">
<h3>5.3 Changing custom attributes<a class="headerlink" href="#changing-custom-attributes" title="Permalink to this headline">¶</a></h3>
<p>What still annoys me a bit is that there are entries in the database where
the end of the observation time is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">None</span></code></a>. Let us change them to the same
value to the start of the observation time (because we can and because it
looks prettier, not because it is accurate). The <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.edit" title="sunpy.database.Database.edit"><code class="xref py py-meth docutils literal"><span class="pre">Database.edit()</span></code></a>
method receives the database entry to be edited and any number of keyword
arguments which describe which values to change and how.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">database_entry</span> <span class="ow">in</span> <span class="n">database</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">database_entry</span><span class="o">.</span><span class="n">observation_time_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">database</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">database_entry</span><span class="p">,</span> <span class="n">observation_time_end</span><span class="o">=</span><span class="n">database_entry</span><span class="o">.</span><span class="n">observation_time_start</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">1  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1</span>
<span class="go">3  2013-09-21 16:00:06    2013-09-21 16:00:06  AIA_2      19.3    19.3</span>
<span class="go">4  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1</span>
<span class="go">5  2014-04-09 06:00:12    2014-04-09 06:00:12  AIA_3      17.1    17.1</span>
<span class="go">6  2011-09-22 00:00:00    2011-09-22 00:00:00  BIR        N/A     N/A</span>
<span class="go">8  2002-06-25 10:00:10    2002-06-25 10:00:10  EIT        19.5    19.5</span>
<span class="go">9  2002-02-20 11:06:00    2002-02-20 11:06:43  RHESSI     N/A     N/A</span>
<span class="go">20 2010-10-16 19:12:18    2010-10-16 19:12:22  RHESSI     N/A     N/A</span>
<span class="go">24 2012-10-30 15:30:01    2012-10-30 15:30:01  AIA_4      9.4     9.4</span>
<span class="go">25 2012-01-01 00:16:07    2012-01-01 00:16:07  SWAP       17.4    17.4</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">31 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">34 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">35 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
</pre></div>
</div>
<p>You may ask yourself now &#8220;Why can&#8217;t I simply use
<code class="docutils literal"><span class="pre">database_entry.observation_time_end</span> <span class="pre">=</span> <span class="pre">database_entry.observation_time_start</span></code>&#8221;?
Well, the answer is: you can, but it has one major disadvantage: you
cannot undo this operation if you don&#8217;t use the methods of the database
objects such as <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.edit" title="sunpy.database.Database.edit"><code class="xref py py-class docutils literal"><span class="pre">Database.edit</span></code></a>. See the section 6, &#8220;Undoing and
redoing operations&#8221;, to see how undoing and redoing works.</p>
</div>
</div>
<div class="section" id="undoing-and-redoing-operations">
<h2>6. Undoing and redoing operations<a class="headerlink" href="#undoing-and-redoing-operations" title="Permalink to this headline">¶</a></h2>
<p>A very handy feature of the database package is that every operation can
be reverted that changes the database in some way. The Database class has
the methods <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.undo" title="sunpy.database.Database.undo"><code class="xref py py-meth docutils literal"><span class="pre">Database.undo()</span></code></a> and <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.redo" title="sunpy.database.Database.redo"><code class="xref py py-meth docutils literal"><span class="pre">Database.redo()</span></code></a> to undo
and redo the last n commands, respectively.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The undo and redo history are only saved in-memory! That means in
particular, that if you work on a Database object in an interactive
Python session and quit this session, the undo and redo history are
lost.</p>
</div>
<p>In the following snippet, the operations from the sections 5.3, 5.2, and
5.1 are undone. Note the following changes: there are no longer any tags
anymore saved in the database, there is no entry which is starred and
there are again entries with no end of observation time.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">undo</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># undo the edits from 5.3 (4 records have been affected)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">undo</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># undo tagging some entries with the tag &#39;spring&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">undo</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># undo starring entries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;starred&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax tags starred</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- ------- ---- -------</span>
<span class="go">1  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1    N/A  No</span>
<span class="go">3  2013-09-21 16:00:06    N/A                  AIA_2      19.3    19.3    N/A  No</span>
<span class="go">4  2011-03-19 10:54:00    N/A                  AIA_3      17.1    17.1    N/A  No</span>
<span class="go">5  2014-04-09 06:00:12    N/A                  AIA_3      17.1    17.1    N/A  No</span>
<span class="go">6  2011-09-22 00:00:00    2011-09-22 00:00:00  BIR        N/A     N/A     N/A  No</span>
<span class="go">8  2002-06-25 10:00:10    N/A                  EIT        19.5    19.5    N/A  No</span>
<span class="go">9  2002-02-20 11:06:00    2002-02-20 11:06:43  RHESSI     N/A     N/A     N/A  No</span>
<span class="go">20 2010-10-16 19:12:18    2010-10-16 19:12:22  RHESSI     N/A     N/A     N/A  No</span>
<span class="go">24 2012-10-30 15:30:01    N/A                  AIA_4      9.4     9.4     N/A  No</span>
<span class="go">25 2012-01-01 00:16:07    N/A                  SWAP       17.4    17.4    N/A  No</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1    N/A  No</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1    N/A  Yes</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4     N/A  No</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5    N/A  Yes</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4     N/A  No</span>
<span class="go">31 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4     N/A  No</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5    N/A  Yes</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5    N/A  Yes</span>
<span class="go">34 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4     N/A  No</span>
<span class="go">35 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4     N/A  No</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5    N/A  Yes</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5    N/A  Yes</span>
</pre></div>
</div>
<p>The redo method reverts the last n operations that have been undone. If
not that many operations can be redone (i.e. any number greater than 14 in
this example), an exception is raised. You can see that the redo call
reverts the original state: the tags appeared again and all entries with a
wavelength &gt;20nm are starred again. Also, there are no entries with no
stored end of observation time anymore.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">redo</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>  <span class="c1"># redo all undone operations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;starred&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax tags   starred</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- ------- ----   -------</span>
<span class="go">1  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1    spring No</span>
<span class="go">3  2013-09-21 16:00:06    2013-09-21 16:00:06  AIA_2      19.3    19.3    N/A    No</span>
<span class="go">4  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1    spring No</span>
<span class="go">5  2014-04-09 06:00:12    2014-04-09 06:00:12  AIA_3      17.1    17.1    spring No</span>
<span class="go">6  2011-09-22 00:00:00    2011-09-22 00:00:00  BIR        N/A     N/A     N/A    No</span>
<span class="go">8  2002-06-25 10:00:10    2002-06-25 10:00:10  EIT        19.5    19.5    N/A    No</span>
<span class="go">9  2002-02-20 11:06:00    2002-02-20 11:06:43  RHESSI     N/A     N/A     N/A    No</span>
<span class="go">20 2010-10-16 19:12:18    2010-10-16 19:12:22  RHESSI     N/A     N/A     N/A    No</span>
<span class="go">24 2012-10-30 15:30:01    2012-10-30 15:30:01  AIA_4      9.4     9.4     N/A    No</span>
<span class="go">25 2012-01-01 00:16:07    2012-01-01 00:16:07  SWAP       17.4    17.4    N/A    No</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1    spring No</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1    spring Yes</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4     spring No</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5    spring Yes</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4     N/A    No</span>
<span class="go">31 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4     N/A    No</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">34 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4     N/A    No</span>
<span class="go">35 2013-08-05 00:00:01    2013-08-05 00:00:02  AIA        9.4     9.4     N/A    No</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
</pre></div>
</div>
</div>
<div class="section" id="querying-the-database">
<h2>7. Querying the database<a class="headerlink" href="#querying-the-database" title="Permalink to this headline">¶</a></h2>
<p>The API for querying databases is similar to querying the VSO using the
method <a class="reference internal" href="../../api/sunpy.net.vso.VSOClient.html#sunpy.net.vso.VSOClient.query" title="sunpy.net.vso.VSOClient.query"><code class="xref py py-meth docutils literal"><span class="pre">sunpy.net.vso.VSOClient.query()</span></code></a>. The <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.query" title="sunpy.database.Database.query"><code class="xref py py-meth docutils literal"><span class="pre">Database.query()</span></code></a>
method accepts any number of ORed query attributes (using |) and
combines them using AND. It returns a list of matched database entries.
The special thing about querying databases is that all attributes support
the unary operator <code class="docutils literal"><span class="pre">~</span></code> to negate specific attributes. Example: the query
<code class="docutils literal"><span class="pre">~Instrument('EIT')</span></code> returns all entries that have <em>not</em> been observed
with the EIT.</p>
<div class="section" id="using-vso-attributes">
<h3>7.1 Using VSO attributes<a class="headerlink" href="#using-vso-attributes" title="Permalink to this headline">¶</a></h3>
<p>Using the attributes from <a class="reference internal" href="../../code_ref/net.html#module-sunpy.net.vso.attrs" title="sunpy.net.vso.attrs"><code class="xref py py-mod docutils literal"><span class="pre">sunpy.net.vso.attrs</span></code></a> is quite intuitive:
the simple attributes and the Time attribute work exactly as you expect
it. Note though that the <code class="xref py py-obj docutils literal"><span class="pre">near</span></code> parameter of
<a class="reference internal" href="../../api/sunpy.net.vso.attrs.Time.html#sunpy.net.vso.attrs.Time" title="sunpy.net.vso.attrs.Time"><code class="xref py py-class docutils literal"><span class="pre">sunpy.net.vso.attrs.Time</span></code></a> is ignored! The reason for this is that
its behaviour is not documented and that it is different depending on the
server which is requested. The following query returns the data that was
added in section 2.3.2, &#8220;Downloading&#8221;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="s1">&#39;2012-08-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-08-05 00:00:05&#39;</span><span class="p">),</span> <span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span><span class="s1">&#39;AIA&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">30 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">31 2012-08-05 00:00:01    2012-08-05 00:00:02  AIA        9.4     9.4</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
</pre></div>
</div>
<p>When using the <code class="xref py py-class docutils literal"><span class="pre">sunpy.net.vso.attrs.Wave</span></code> attribute, you have to
specify a unit using <code class="docutils literal"><span class="pre">astropy.units.Quantity</span></code>. If not an error is
raised. This also implies that there is no default unit that is
used by the class. To know how you can specify a detail using astropy
check <a class="reference external" href="http://docs.astropy.org/en/stable/units/index.html#module-astropy.units" title="(in Astropy v2.0.1)"><code class="xref py py-obj docutils literal"><span class="pre">astropy.units</span></code></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="k">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">vso</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">Wavelength</span><span class="p">(</span><span class="mf">1.0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">nm</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">1  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1</span>
<span class="go">25 2012-01-01 00:16:07    2012-01-01 00:16:07  SWAP       17.4    17.4</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1</span>
<span class="go">3  2013-09-21 16:00:06    2013-09-21 16:00:06  AIA_2      19.3    19.3</span>
<span class="go">4  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1</span>
<span class="go">5  2014-04-09 06:00:12    2014-04-09 06:00:12  AIA_3      17.1    17.1</span>
<span class="go">8  2002-06-25 10:00:10    2002-06-25 10:00:10  EIT        19.5    19.5</span>
</pre></div>
</div>
</div>
<div class="section" id="database-specific-attributes">
<h3>7.2 Database-specific attributes<a class="headerlink" href="#database-specific-attributes" title="Permalink to this headline">¶</a></h3>
<p>There are 5 additional query attributes supported by the database package.
They can be imported from the submodule <a class="reference internal" href="../../code_ref/database.html#module-sunpy.database.attrs" title="sunpy.database.attrs"><code class="xref py py-mod docutils literal"><span class="pre">sunpy.database.attrs</span></code></a> and are in
particular:</p>
<ul class="simple">
<li>Starred</li>
<li>Tag</li>
<li>Path</li>
<li>DownloadTime</li>
<li>FitsHeaderEntry</li>
</ul>
<p>The following query searches for all entries that have the tag &#8216;spring&#8217; or
(inclusive or!) are starred and have not the FITS header key &#8216;WAVEUNIT&#8217;
with the value &#8216;Angstrom&#8217;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sunpy.database.attrs</span> <span class="k">as</span> <span class="nn">dbattrs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">dbattrs</span><span class="o">.</span><span class="n">Tag</span><span class="p">(</span><span class="s1">&#39;spring&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="n">dbattrs</span><span class="o">.</span><span class="n">Starred</span><span class="p">(),</span> <span class="o">~</span><span class="n">dbattrs</span><span class="o">.</span><span class="n">FitsHeaderEntry</span><span class="p">(</span><span class="s1">&#39;WAVEUNIT&#39;</span><span class="p">,</span> <span class="s1">&#39;Angstrom&#39;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;starred&#39;</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax tags   starred</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- ------- ----   -------</span>
<span class="go">1  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1    spring No</span>
<span class="go">26 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        17.1    17.1    spring No</span>
<span class="go">27 2011-05-08 00:00:00    2011-05-08 00:00:01  AIA        21.1    21.1    spring Yes</span>
<span class="go">28 2011-05-08 00:00:02    2011-05-08 00:00:03  AIA        9.4     9.4     spring No</span>
<span class="go">29 2011-05-08 00:00:03    2011-05-08 00:00:04  AIA        33.5    33.5    spring Yes</span>
<span class="go">32 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5    N/A    Yes</span>
<span class="go">4  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1    spring No</span>
<span class="go">5  2014-04-09 06:00:12    2014-04-09 06:00:12  AIA_3      17.1    17.1    spring No</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="caching">
<h2>8. Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<p>All entries that are saved in the database are also saved in a cache
in-memory. The type of the cache is determined at the initialization of
the database object and cannot be changed after that. The default type is
<a class="reference internal" href="../../api/sunpy.database.caching.LRUCache.html#sunpy.database.caching.LRUCache" title="sunpy.database.caching.LRUCache"><code class="xref py py-class docutils literal"><span class="pre">caching.LRUCache</span></code></a> (least-recently used) and the other one which is
supported is <a class="reference internal" href="../../api/sunpy.database.caching.LFUCache.html#sunpy.database.caching.LFUCache" title="sunpy.database.caching.LFUCache"><code class="xref py py-class docutils literal"><span class="pre">caching.LFUCache</span></code></a> (least-frequently used). Per
default the cache size is <code class="docutils literal"><span class="pre">float('inf')</span></code>, i.e. infinite. To set the
cache size after the database object has been initialized, use the method
<a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.set_cache_size" title="sunpy.database.Database.set_cache_size"><code class="xref py py-meth docutils literal"><span class="pre">Database.set_cache_size()</span></code></a>. If the new size is smaller than the
current number of database entries, entries are removed according to the
cache type until the number of entries is equal to the given cache size.
The following call to <a class="reference internal" href="../../api/sunpy.database.Database.html#sunpy.database.Database.set_cache_size" title="sunpy.database.Database.set_cache_size"><code class="xref py py-meth docutils literal"><span class="pre">Database.set_cache_size()</span></code></a> sets the cache size
to 10 and therefore removes the 5 entries that been used least recently.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">database</span><span class="o">.</span><span class="n">set_cache_size</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">display_entries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">database</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_start&#39;</span><span class="p">,</span> <span class="s1">&#39;observation_time_end&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;instrument&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemin&#39;</span><span class="p">,</span> <span class="s1">&#39;wavemax&#39;</span><span class="p">]))</span>   
<span class="go">id observation_time_start observation_time_end instrument wavemin wavemax</span>
<span class="go">-- ---------------------- -------------------- ---------- ------- -------</span>
<span class="go">1  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1</span>
<span class="go">3  2013-09-21 16:00:06    2013-09-21 16:00:06  AIA_2      19.3    19.3</span>
<span class="go">4  2011-03-19 10:54:00    2011-03-19 10:54:00  AIA_3      17.1    17.1</span>
<span class="go">5  2014-04-09 06:00:12    2014-04-09 06:00:12  AIA_3      17.1    17.1</span>
<span class="go">8  2002-06-25 10:00:10    2002-06-25 10:00:10  EIT        19.5    19.5</span>
<span class="go">24 2012-10-30 15:30:01    2012-10-30 15:30:01  AIA_4      9.4     9.4</span>
<span class="go">25 2012-01-01 00:16:07    2012-01-01 00:16:07  SWAP       17.4    17.4</span>
<span class="go">33 2012-08-05 00:00:02    2012-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">36 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
<span class="go">37 2013-08-05 00:00:02    2013-08-05 00:00:03  AIA        33.5    33.5</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, The SunPy Community.<br/>
      Last updated on 14 Aug 2017.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>